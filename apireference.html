
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>API Reference &#8212; yhttp 3.5.2 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Cookbook" href="cookbook.html" />
    <link href="_static/style.css" rel="stylesheet" type="text/css">

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-yhttp">
<span id="api-reference"></span><h1>API Reference<a class="headerlink" href="#module-yhttp" title="Permalink to this headline">¶</a></h1>
<section id="base-application-class">
<h2>Base Application Class<a class="headerlink" href="#base-application-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="yhttp.BaseApplication">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">yhttp.</span></span><span class="sig-name descname"><span class="pre">BaseApplication</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.BaseApplication" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="yhttp.BaseApplication.settings">
<span class="sig-name descname"><span class="pre">settings</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#yhttp.BaseApplication.settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Instance of <a class="reference external" href="https://pylover.github.io/pymlconf/pymlconf.html#pymlconf.Root" title="(in pymlconf v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pymlconf.Root</span></code></a> as the global configuration instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="yhttp.BaseApplication.when">
<span class="sig-name descname"><span class="pre">when</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.BaseApplication.when" title="Permalink to this definition">¶</a></dt>
<dd><p>Return decorator to registers the <code class="docutils literal notranslate"><span class="pre">func</span></code> into             <code class="xref py py-attr docutils literal notranslate"><span class="pre">Application.events</span></code> by its name.</p>
<p>Currently these hooks are suuported:</p>
<ul class="simple">
<li><p>ready</p></li>
<li><p>shutdown</p></li>
<li><p>endresponse</p></li>
</ul>
<p>The hook name will be choosed by the func.__name__, so if you need to
aware when <code class="docutils literal notranslate"><span class="pre">app.ready</span></code> is called write something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">when</span>
<span class="k">def</span> <span class="nf">ready</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="o">...</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">when</span>
<span class="k">def</span> <span class="nf">shutdown</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="o">...</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">when</span>
<span class="k">def</span> <span class="nf">endresponse</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="yhttp.BaseApplication.hook">
<span class="sig-name descname"><span class="pre">hook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.BaseApplication.hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Only way to fire registered hooks.</p>
<p>Hooks can registered by <code class="xref py py-meth docutils literal notranslate"><span class="pre">Application.when()</span></code> with the name.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">hook</span><span class="p">(</span><span class="s1">&#39;endresponse&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Extra parameters: <code class="docutils literal notranslate"><span class="pre">*a,</span> <span class="pre">**kw</span></code> will be passed to event handlers.</p>
<p>Normally, users no need to call this method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="yhttp.BaseApplication.ready">
<span class="sig-name descname"><span class="pre">ready</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.BaseApplication.ready" title="Permalink to this definition">¶</a></dt>
<dd><p>Call the <code class="docutils literal notranslate"><span class="pre">ready</span></code> <a class="reference internal" href="#yhttp.BaseApplication.hook" title="yhttp.BaseApplication.hook"><code class="xref py py-meth docutils literal notranslate"><span class="pre">hook()</span></code></a>.</p>
<p>You need to call this method before using the instance as the WSGI
application.</p>
<p>Typical usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">yhttp</span> <span class="kn">import</span> <span class="n">Application</span><span class="p">,</span> <span class="n">text</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">Application</span><span class="p">()</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">()</span>
<span class="nd">@text</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;Hello World!&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">!=</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">ready</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="yhttp.BaseApplication.shutdown">
<span class="sig-name descname"><span class="pre">shutdown</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.BaseApplication.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Call the <code class="docutils literal notranslate"><span class="pre">shutdown</span></code> <a class="reference internal" href="#yhttp.BaseApplication.hook" title="yhttp.BaseApplication.hook"><code class="xref py py-meth docutils literal notranslate"><span class="pre">hook()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="yhttp.BaseApplication.climain">
<span class="sig-name descname"><span class="pre">climain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.BaseApplication.climain" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a callable to call as the CLI entry point.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">climain</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">))</span>
</pre></div>
</div>
<p>You can use this method as the setuptools entry point for
<a class="reference external" href="https://setuptools.readthedocs.io/en/latest/setuptools.html#automatic-script-creation">Automatic Script Creation</a></p>
<p><code class="docutils literal notranslate"><span class="pre">setup.py</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>


<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span>
    <span class="o">...</span>
    <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;console_scripts&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;foo = foo:app.climain&#39;</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="tutorials/quickstart.html#quickstart-commandlineinterface"><span class="std std-ref">Command Line Interface</span></a></p>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="application-class">
<h2>Application Class<a class="headerlink" href="#application-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="yhttp.Application">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">yhttp.</span></span><span class="sig-name descname"><span class="pre">Application</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.Application" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#yhttp.BaseApplication" title="yhttp.application.BaseApplication"><code class="xref py py-class docutils literal notranslate"><span class="pre">yhttp.application.BaseApplication</span></code></a></p>
<p>WSGI Web Application.</p>
<p>Instance of this class can be used as a WSGI application.</p>
<dl class="py method">
<dt class="sig sig-object py" id="yhttp.Application.route">
<span class="sig-name descname"><span class="pre">route</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insert</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.Application.route" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a decorator to register a handler for given regex pattern.</p>
<p>if <code class="docutils literal notranslate"><span class="pre">verb</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code> then the function name will used instead.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;/.*&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>You can bypass this behavior by passing <code class="docutils literal notranslate"><span class="pre">verb</span></code> keyword argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="s1">&#39;get&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">somethingelse</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>To catch any verb by the handler use <code class="docutils literal notranslate"><span class="pre">*</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">any</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Regular expression groups will be capture and dispatched as the
positional arguments of the handler after <code class="docutils literal notranslate"><span class="pre">req</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;/(</span><span class="se">\\</span><span class="s1">d+)/(</span><span class="se">\\</span><span class="s1">w*)&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>This method returns a decorator for handler fucntions. So, you can use
it like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">books</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;/books/(.*)&#39;</span><span class="p">)</span>

<span class="nd">@books</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="o">...</span>

<span class="nd">@books</span>
<span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="cookbook.html#cookbook-routing"><span class="std std-ref">Routing</span></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern</strong> – Regular expression to match the request.</p></li>
<li><p><strong>flags</strong> – Regular expression flags. see <a class="reference external" href="https://docs.python.org/3.6/library/re.html#re.compile" title="(in Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">re.compile()</span></code></a>.</p></li>
<li><p><strong>verb</strong> – If not given then <code class="docutils literal notranslate"><span class="pre">handler.__name__</span></code> will be used to
match HTYP verb, Use <code class="docutils literal notranslate"><span class="pre">*</span></code> to catch all verbs.</p></li>
<li><p><strong>insert</strong> – If not given, route will be appended to the end of the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Application.routes</span></code>. Otherwise it must be an
integer indicating the place to insert the new route
into <code class="xref py py-attr docutils literal notranslate"><span class="pre">Application.routes</span></code> attribute.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.9: </span><code class="docutils literal notranslate"><span class="pre">insert</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="yhttp.Application.staticfile">
<span class="sig-name descname"><span class="pre">staticfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.Application.staticfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a filename with a regular expression pattern to be served.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">staticfile</span><span class="p">(</span><span class="s1">&#39;/a.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;physical/path/to/a.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="cookbook.html#cookbook-static"><span class="std std-ref">Static Contents</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="yhttp.Application.staticdirectory">
<span class="sig-name descname"><span class="pre">staticdirectory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fallback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.Application.staticdirectory" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a directory with a regular expression pattern.</p>
<p>So the files inside the directory are accessible by their names:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">staticdirectory</span><span class="p">(</span><span class="s1">&#39;/foo/&#39;</span><span class="p">,</span> <span class="s1">&#39;physical/path/to/foo&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You you can do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl localhost:8080/foo/a.txt
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="cookbook.html#cookbook-static"><span class="std std-ref">Static Contents</span></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern</strong> – Regular expression to match the requests.</p></li>
<li><p><strong>directory</strong> – Static files are here.</p></li>
<li><p><strong>default</strong> – if None, the <code class="docutils literal notranslate"><span class="pre">app.settings.staticdir.default</span></code>
(which default is <code class="docutils literal notranslate"><span class="pre">index.html</span></code>) will be used as the
default document.</p></li>
<li><p><strong>fallback</strong> – if <code class="docutils literal notranslate"><span class="pre">True</span></code>, the <code class="docutils literal notranslate"><span class="pre">app.settings.staticdir.fallback</span></code>
(which default is <code class="docutils literal notranslate"><span class="pre">index.html</span></code>) will be used as the
fallback document if the requested resource was not
found. if <code class="docutils literal notranslate"><span class="pre">str</span></code>, the value will be used instead of
<code class="docutils literal notranslate"><span class="pre">app.settings.staticdir.fallback</span></code>.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.13: </span>The <em>default</em> and <em>fallback</em> keyword arguments.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="yhttp.Application.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environ</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startresponse</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.Application.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Actual WSGI Application.</p>
<p>So, will be called on every request.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">yhttp</span> <span class="kn">import</span> <span class="n">Application</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">Application</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">app</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">start_response</span><span class="p">)</span>
</pre></div>
</div>
<p>Checkout the <a class="reference external" href="https://www.python.org/dev/peps/pep-0333/">PEP 333</a>
for more info.</p>
</dd></dl>

</dd></dl>

</section>
<section id="rewrite-class">
<h2>Rewrite Class<a class="headerlink" href="#rewrite-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="yhttp.Rewrite">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">yhttp.</span></span><span class="sig-name descname"><span class="pre">Rewrite</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.Rewrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#yhttp.BaseApplication" title="yhttp.application.BaseApplication"><code class="xref py py-class docutils literal notranslate"><span class="pre">yhttp.application.BaseApplication</span></code></a></p>
<p>Useful to route specific requests to other WSGI application.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.2.</span></p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">yhttp</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">yhttp</span><span class="o">.</span><span class="n">Application</span><span class="p">()</span>
<span class="n">foo</span> <span class="o">=</span> <span class="n">yhttp</span><span class="o">.</span><span class="n">Application</span><span class="p">()</span>
<span class="n">bar</span> <span class="o">=</span> <span class="n">yhttp</span><span class="o">.</span><span class="n">Application</span><span class="p">()</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">yhttp</span><span class="o">.</span><span class="n">Rewrite</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">root</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;/foo/?&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">foo</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;/bar/?(.*)&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;/b/\1&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">ready</span><span class="p">()</span>

<span class="nd">@root</span><span class="o">.</span><span class="n">route</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;root&#39;</span>

<span class="nd">@foo</span><span class="o">.</span><span class="n">route</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;foo&#39;</span>

<span class="nd">@bar</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;/b&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;bar&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>default</strong> – Fallback application.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="yhttp.Rewrite.route">
<span class="sig-name descname"><span class="pre">route</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">repl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">handler</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.Rewrite.route" title="Permalink to this definition">¶</a></dt>
<dd><p>Register an application for specific url.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">yhttp</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">yhttp</span><span class="o">.</span><span class="n">Application</span><span class="p">()</span>
<span class="n">foo</span> <span class="o">=</span> <span class="n">yhttp</span><span class="o">.</span><span class="n">Application</span><span class="p">()</span>
<span class="n">bar</span> <span class="o">=</span> <span class="n">yhttp</span><span class="o">.</span><span class="n">Application</span><span class="p">()</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">yhttp</span><span class="o">.</span><span class="n">Rewrite</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">root</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;/foo/([a-z]+)/(\d+)&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;/books/\2/\1&#39;</span><span class="p">,</span> <span class="n">foo</span><span class="p">)</span>
<span class="c1"># Add other applications</span>
<span class="n">app</span><span class="o">.</span><span class="n">ready</span><span class="p">()</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://docs.python.org/3.6/library/re.html#re.sub" title="(in Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">re.sub()</span></code></a> for more info about <code class="docutils literal notranslate"><span class="pre">pattern</span></code> and <code class="docutils literal notranslate"><span class="pre">repl</span></code>
arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern</strong> – A regex pattern to match the <code class="docutils literal notranslate"><span class="pre">environ['PATH_INFO']</span></code>.</p></li>
<li><p><strong>repl</strong> – URL Rewrite rule, See <a class="reference external" href="https://docs.python.org/3.6/library/re.html#re.sub" title="(in Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">re.sub()</span></code></a></p></li>
<li><p><strong>handler</strong> – An instance of <a class="reference internal" href="#yhttp.BaseApplication" title="yhttp.BaseApplication"><code class="xref py py-class docutils literal notranslate"><span class="pre">yhttp.BaseApplication</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="yhttp.Rewrite.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environ</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startresponse</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.Rewrite.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the registred apllication, rewrite and forward the request.</p>
</dd></dl>

</dd></dl>

</section>
<section id="request-class">
<h2>Request Class<a class="headerlink" href="#request-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="yhttp.Request">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">yhttp.</span></span><span class="sig-name descname"><span class="pre">Request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">environ</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.Request" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent an HTTP request.</p>
<p><a class="reference internal" href="#yhttp.Application.__call__" title="yhttp.Application.__call__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Application.__call__()</span></code></a> instantiates this class on each call.</p>
</dd></dl>

</section>
<section id="headersmask-class">
<h2>HeadersMask Class<a class="headerlink" href="#headersmask-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="yhttp.HeadersMask">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">yhttp.</span></span><span class="sig-name descname"><span class="pre">HeadersMask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environ</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.HeadersMask" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple proxy over <code class="xref py py-attr docutils literal notranslate"><span class="pre">Request.environ</span></code>.</p>
<p>Useful to get headers by their original name without the <code class="docutils literal notranslate"><span class="pre">HTTP_</span></code> prefix,
which is the python’s WSGI servers default behavior.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="n">foo</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span>
    <span class="n">bar</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;baz&#39;</span> <span class="ow">in</span> <span class="n">req</span><span class="o">.</span><span class="n">headers</span><span class="p">:</span>
        <span class="n">baz</span> <span class="o">=</span> <span class="kc">True</span>

     <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="response-class">
<h2>Response Class<a class="headerlink" href="#response-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="yhttp.Response">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">yhttp.</span></span><span class="sig-name descname"><span class="pre">Response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">environ</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startresponse</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.Response" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the HTTP response.</p>
<p>Which accessible by <code class="xref py py-attr docutils literal notranslate"><span class="pre">Request.response</span></code> inside handlers.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="yhttp.Response.status">
<span class="sig-name descname"><span class="pre">status</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'200</span> <span class="pre">Ok'</span></em><a class="headerlink" href="#yhttp.Response.status" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP Status code</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="yhttp.Response.charset">
<span class="sig-name descname"><span class="pre">charset</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#yhttp.Response.charset" title="Permalink to this definition">¶</a></dt>
<dd><p>Response encoding, <code class="docutils literal notranslate"><span class="pre">None</span></code> for binary</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="yhttp.Response.length">
<span class="sig-name descname"><span class="pre">length</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#yhttp.Response.length" title="Permalink to this definition">¶</a></dt>
<dd><p>Response content length</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="yhttp.Response.type">
<span class="sig-name descname"><span class="pre">type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#yhttp.Response.type" title="Permalink to this definition">¶</a></dt>
<dd><p>Response content type without charset.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="yhttp.Response.contenttype">
<span class="sig-name descname"><span class="pre">contenttype</span></span><a class="headerlink" href="#yhttp.Response.contenttype" title="Permalink to this definition">¶</a></dt>
<dd><p>Response content type incuding charset.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="yhttp.Response.headers">
<span class="sig-name descname"><span class="pre">headers</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#yhttp.Response.headers" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of <a class="reference internal" href="#yhttp.HeaderSet" title="yhttp.HeaderSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">HeaderSet</span></code></a> class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="yhttp.Response.conclude">
<span class="sig-name descname"><span class="pre">conclude</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.Response.conclude" title="Permalink to this definition">¶</a></dt>
<dd><p>Conclude the response.</p>
<p>Calls WSGI start_response callback and encode response body to
transfer to the client.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>response body</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="yhttp.Response.startstream">
<span class="sig-name descname"><span class="pre">startstream</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.Response.startstream" title="Permalink to this definition">¶</a></dt>
<dd><p>Start streaming the response.</p>
<p>Transfer data chunk by chunk instead of what <a class="reference internal" href="#yhttp.Response.conclude" title="yhttp.Response.conclude"><code class="xref py py-meth docutils literal notranslate"><span class="pre">conclude()</span></code></a> does.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="yhttp.Response.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.Response.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the response.</p>
<p>Usualy <a class="reference internal" href="#yhttp.Application" title="yhttp.Application"><code class="xref py py-class docutils literal notranslate"><span class="pre">Application</span></code></a> calls this method when response is ready
to transfered to user.</p>
</dd></dl>

</dd></dl>

</section>
<section id="headerset-class">
<h2>HeaderSet Class<a class="headerlink" href="#headerset-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="yhttp.HeaderSet">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">yhttp.</span></span><span class="sig-name descname"><span class="pre">HeaderSet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">items</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.HeaderSet" title="Permalink to this definition">¶</a></dt>
<dd><p>A mutable case-insensitive ordered dictionary to keep HTTP headers.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="n">req</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;x-foo&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;x-bar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
    <span class="n">req</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;x-baz: qux&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="httpstatus-class">
<h2>HTTPStatus Class<a class="headerlink" href="#httpstatus-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="yhttp.HTTPStatus">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">yhttp.</span></span><span class="sig-name descname"><span class="pre">HTTPStatus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepheaders</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nobody</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.HTTPStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for all HTTP Exceptions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> – HTTP status code.</p></li>
<li><p><strong>text</strong> – HTTP status text.</p></li>
<li><p><strong>keepheaders</strong> – If set, appliation keeps the <a class="reference internal" href="#yhttp.Response.headers" title="yhttp.Response.headers"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Response.headers</span></code></a>
when exception is occured.</p></li>
<li><p><strong>headers</strong> – Some extra HTTP headers to be added to the
<a class="reference internal" href="#yhttp.Response.headers" title="yhttp.Response.headers"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Response.headers</span></code></a> when exception is raised.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="contenttype-decorators">
<h2>contenttype decorators<a class="headerlink" href="#contenttype-decorators" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="yhttp.contenttype">
<span class="sig-prename descclassname"><span class="pre">yhttp.</span></span><span class="sig-name descname"><span class="pre">contenttype</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contenttype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">charset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dump</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.contenttype" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a decorator to set response content type and encoding.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">yhttp</span> <span class="kn">import</span> <span class="n">contenttype</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">()</span>
<span class="nd">@contenttype</span><span class="p">(</span><span class="s1">&#39;application/json&#39;</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>There are ready to use contenttype decorators which can importes from
<code class="docutils literal notranslate"><span class="pre">yhttp</span></code> package, like: <a class="reference internal" href="#yhttp.json" title="yhttp.json"><code class="xref py py-func docutils literal notranslate"><span class="pre">json()</span></code></a>.</p>
<p>You may create your very own content type decorator by calling this
function with desired arguments, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">invoice</span> <span class="o">=</span> <span class="n">contenttype</span><span class="p">(</span><span class="s1">&#39;application/pdf&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">dump</span><span class="o">=</span><span class="n">makeinvoicepdf</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/invoices/(\d+)&#39;</span><span class="p">)</span>
<span class="nd">@invoice</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#yhttp.json" title="yhttp.json"><code class="xref py py-func docutils literal notranslate"><span class="pre">json()</span></code></a> decorator is created with something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">json</span> <span class="o">=</span> <span class="n">contenttype</span><span class="p">(</span><span class="s1">&#39;application/json&#39;</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">,</span> <span class="n">dump</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#yhttp.binary" title="yhttp.binary"><code class="xref py py-func docutils literal notranslate"><span class="pre">binary()</span></code></a>
<a class="reference internal" href="#yhttp.json" title="yhttp.json"><code class="xref py py-func docutils literal notranslate"><span class="pre">json()</span></code></a>
<a class="reference internal" href="#yhttp.text" title="yhttp.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contenttype</strong> – HTTP Content-Type, example: application/json</p></li>
<li><p><strong>charset</strong> – Character set, example: utf8</p></li>
<li><p><strong>dump</strong> – A <code class="docutils literal notranslate"><span class="pre">callable(body)</span> <span class="pre">-&gt;</span> <span class="pre">body</span></code> to transform the body to
appropriate content type.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>decorator for HTTP handlers.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.binary">
<span class="sig-prename descclassname"><span class="pre">yhttp.</span></span><span class="sig-name descname"><span class="pre">binary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handler</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.binary" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the <a class="reference internal" href="#yhttp.Response.contenttype" title="yhttp.Response.contenttype"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Response.contenttype</span></code></a> to <code class="docutils literal notranslate"><span class="pre">application/octet-stream</span></code>.</p>
<p>Handlers must return <a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#bytes" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> when this decorator is used.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">yhttp</span> <span class="kn">import</span> <span class="n">binary</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">()</span>
<span class="nd">@binary</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">b</span><span class="s1">&#39;binarydata&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.json">
<span class="sig-prename descclassname"><span class="pre">yhttp.</span></span><span class="sig-name descname"><span class="pre">json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handler</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.json" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the <a class="reference internal" href="#yhttp.Response.contenttype" title="yhttp.Response.contenttype"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Response.contenttype</span></code></a> to <code class="docutils literal notranslate"><span class="pre">application/json;charset=utf-8</span></code>
and encode the returned value by handler to json byte-string format.</p>
<p>Handlers must return <a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#dict" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> when this decorator is used.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">yhttp</span> <span class="kn">import</span> <span class="n">json</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">()</span>
<span class="nd">@json</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.text">
<span class="sig-prename descclassname"><span class="pre">yhttp.</span></span><span class="sig-name descname"><span class="pre">text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handler</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.text" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the <a class="reference internal" href="#yhttp.Response.contenttype" title="yhttp.Response.contenttype"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Response.contenttype</span></code></a> to <code class="docutils literal notranslate"><span class="pre">text/text;</span> <span class="pre">charset=utf-8</span></code>.</p>
<p>Handlers must return <a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> when this decorator is used.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.8.</span></p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">yhttp</span> <span class="kn">import</span> <span class="n">text</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">()</span>
<span class="nd">@text</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;Unicode String&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.html">
<span class="sig-prename descclassname"><span class="pre">yhttp.</span></span><span class="sig-name descname"><span class="pre">html</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handler</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.html" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the <a class="reference internal" href="#yhttp.Response.contenttype" title="yhttp.Response.contenttype"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Response.contenttype</span></code></a> to <code class="docutils literal notranslate"><span class="pre">text/html;</span> <span class="pre">charset=utf-8</span></code>.</p>
<p>Handlers must return <a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> when this decorator is used.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.8.</span></p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">yhttp</span> <span class="kn">import</span> <span class="n">html</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">()</span>
<span class="nd">@html</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;Unicode String&#39;</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="validate-decorator">
<h2>validate decorator<a class="headerlink" href="#validate-decorator" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="yhttp.validate">
<span class="sig-prename descclassname"><span class="pre">yhttp.</span></span><span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nobody</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>see <a class="reference internal" href="cookbook.html#cookbook-validation"><span class="std std-ref">Request Valiation</span></a></p>
</dd></dl>

</section>
<section id="module-yhttp.statuses">
<span id="statuses-module"></span><h2>statuses Module<a class="headerlink" href="#module-yhttp.statuses" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="yhttp.statuses.status">
<span class="sig-prename descclassname"><span class="pre">yhttp.statuses.</span></span><span class="sig-name descname"><span class="pre">status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.statuses.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for <a class="reference internal" href="#yhttp.HTTPStatus" title="yhttp.statuses.HTTPStatus"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPStatus</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.statuses.badrequest">
<span class="sig-prename descclassname"><span class="pre">yhttp.statuses.</span></span><span class="sig-name descname"><span class="pre">badrequest</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.statuses.badrequest" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP 400 Bad Request exception factory</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.statuses.unauthorized">
<span class="sig-prename descclassname"><span class="pre">yhttp.statuses.</span></span><span class="sig-name descname"><span class="pre">unauthorized</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.statuses.unauthorized" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP 401 Unauthorized exception factory</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.statuses.forbidden">
<span class="sig-prename descclassname"><span class="pre">yhttp.statuses.</span></span><span class="sig-name descname"><span class="pre">forbidden</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.statuses.forbidden" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP 403 Forbidden exception factory</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.statuses.notfound">
<span class="sig-prename descclassname"><span class="pre">yhttp.statuses.</span></span><span class="sig-name descname"><span class="pre">notfound</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.statuses.notfound" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP 404 Not Found exception factory</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.statuses.methodnotallowed">
<span class="sig-prename descclassname"><span class="pre">yhttp.statuses.</span></span><span class="sig-name descname"><span class="pre">methodnotallowed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.statuses.methodnotallowed" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP 405 Method Not Allowed exception factory</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.statuses.conflict">
<span class="sig-prename descclassname"><span class="pre">yhttp.statuses.</span></span><span class="sig-name descname"><span class="pre">conflict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.statuses.conflict" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP 409 Conflict exception factory</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.statuses.gone">
<span class="sig-prename descclassname"><span class="pre">yhttp.statuses.</span></span><span class="sig-name descname"><span class="pre">gone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.statuses.gone" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP 410 Gone exception factory</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.statuses.preconditionfailed">
<span class="sig-prename descclassname"><span class="pre">yhttp.statuses.</span></span><span class="sig-name descname"><span class="pre">preconditionfailed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.statuses.preconditionfailed" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP 412 Precondition Failed exception factory</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.statuses.notmodified">
<span class="sig-prename descclassname"><span class="pre">yhttp.statuses.</span></span><span class="sig-name descname"><span class="pre">notmodified</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.statuses.notmodified" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP 304 Not Modified exception factory</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.statuses.internalservererror">
<span class="sig-prename descclassname"><span class="pre">yhttp.statuses.</span></span><span class="sig-name descname"><span class="pre">internalservererror</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.statuses.internalservererror" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP 500 Internal Server Error exception factory</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.statuses.badgateway">
<span class="sig-prename descclassname"><span class="pre">yhttp.statuses.</span></span><span class="sig-name descname"><span class="pre">badgateway</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.statuses.badgateway" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP 502 Bad Gateway exception factory</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.statuses.movedpermanently">
<span class="sig-prename descclassname"><span class="pre">yhttp.statuses.</span></span><span class="sig-name descname"><span class="pre">movedpermanently</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.statuses.movedpermanently" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP 301 Moved Permanently exception factory</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.statuses.found">
<span class="sig-prename descclassname"><span class="pre">yhttp.statuses.</span></span><span class="sig-name descname"><span class="pre">found</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.statuses.found" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP 302 Found exception factory</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="yhttp.statuses.statuscode">
<span class="sig-prename descclassname"><span class="pre">yhttp.statuses.</span></span><span class="sig-name descname"><span class="pre">statuscode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#yhttp.statuses.statuscode" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the <a class="reference internal" href="#yhttp.Response.status" title="yhttp.Response.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Response.status</span></code></a> to <code class="docutils literal notranslate"><span class="pre">code</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">()</span>
<span class="nd">@statuscode</span><span class="p">(</span><span class="s1">&#39;201 Created&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="o">...</span>

<span class="k">with</span> <span class="n">Given</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;201 Created&#39;</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.5.</span></p>
</div>
</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">yhttp</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook.html">Cookbook</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#base-application-class">Base Application Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#application-class">Application Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rewrite-class">Rewrite Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#request-class">Request Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#headersmask-class">HeadersMask Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#response-class">Response Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#headerset-class">HeaderSet Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#httpstatus-class">HTTPStatus Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#contenttype-decorators">contenttype decorators</a></li>
<li class="toctree-l2"><a class="reference internal" href="#validate-decorator">validate decorator</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-yhttp.statuses">statuses Module</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="cookbook.html" title="previous chapter">Cookbook</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <span id="forkongithub">
      <a class="desktop" href="https://github.com/yhttp/yhttp">Fork me on GitHub</a>
      <a class="mobile" href="https://github.com/yhttp/yhttp">Source</a>
    </span>

  </body>
</html>